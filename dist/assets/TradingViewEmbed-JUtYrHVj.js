import{j as e,R as L,S as P,aP as u,C as f,m,a1 as R,I as V,T as H,h as z}from"./vendor-fTMV3q5d.js";import{a as i}from"./react-OYokQGn-.js";import{e as j,T as B,f as I,g as y,h as w,C as h,a as v,b,c as N,d as x,B as U}from"./index-Du1LFI1a.js";import{b as W,c as O,a as Q,f as C,i as p}from"./data-ButEY0lT.js";import"./radix-CcqZMRLn.js";const J=i.memo(()=>{const[l,T]=i.useState("crypto"),[k,g]=i.useState(!1),[S,D]=i.useState(W),[M,E]=i.useState(O),c=i.useRef(null),d=i.useRef(null);i.useEffect(()=>{const n=setTimeout(()=>{try{if(c.current&&l==="crypto"){c.current.innerHTML="";const t=document.createElement("div");t.className="tradingview-widget-container",t.style.height="100%",t.style.width="100%";const r=document.createElement("div");r.className="tradingview-widget-container__widget",r.style.height="calc(100% - 32px)",r.style.width="100%";const a=document.createElement("script");a.type="text/javascript",a.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",a.async=!0;const o={autosize:!0,symbol:"BINANCE:BTCUSDT",interval:"D",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",enable_publishing:!1,withdateranges:!0,range:"YTD",hide_side_toolbar:!1,allow_symbol_change:!0,details:!0,hotlist:!0,calendar:!1,studies:["STD;SMA"]};a.innerHTML=JSON.stringify(o),t.appendChild(r),t.appendChild(a),c.current.appendChild(t)}if(d.current&&l==="stocks"){d.current.innerHTML="";const t=document.createElement("div");t.className="tradingview-widget-container",t.style.height="100%",t.style.width="100%";const r=document.createElement("div");r.className="tradingview-widget-container__widget",r.style.height="calc(100% - 32px)",r.style.width="100%";const a=document.createElement("script");a.type="text/javascript",a.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",a.async=!0;const o={autosize:!0,symbol:"NASDAQ:AAPL",interval:"D",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",enable_publishing:!1,withdateranges:!0,range:"YTD",hide_side_toolbar:!1,allow_symbol_change:!0,details:!0,hotlist:!0,calendar:!1,studies:["STD;SMA","STD;MACD"]};a.innerHTML=JSON.stringify(o),t.appendChild(r),t.appendChild(a),d.current.appendChild(t)}}catch(t){console.error("TradingView widget error:",t)}},1e3);return()=>clearTimeout(n)},[l]),i.useEffect(()=>{const s=setInterval(()=>{D(n=>n.map(t=>({...t,price:t.price*(1+(Math.random()-.5)*.01),change24h:t.change24h*(1+(Math.random()-.5)*.1),changePercent24h:t.changePercent24h*(1+(Math.random()-.5)*.1)}))),E(n=>n.map(t=>({...t,price:t.price*(1+(Math.random()-.5)*.005),change24h:t.change24h*(1+(Math.random()-.5)*.1),changePercent24h:t.changePercent24h*(1+(Math.random()-.5)*.1)})))},3e3);return()=>clearInterval(s)},[]);const _=l==="crypto"?S:M,A=()=>{g(!0),setTimeout(()=>g(!1),1500)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Live Markets"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time market data and analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(L,{className:`w-4 h-4 mr-2 ${k?"animate-spin":""}`}),"Refresh"]}),e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}),e.jsxs(B,{value:l,onValueChange:T,className:"w-full",children:[e.jsxs(I,{className:"grid w-full grid-cols-2 bg-muted/50",children:[e.jsxs(y,{value:"crypto",className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:"Cryptocurrency"})]}),e.jsxs(y,{value:"stocks",className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:"S&P 500 / NASDAQ"})]})]}),e.jsx(w,{value:"crypto",className:"space-y-6",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(h,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-empire-gold-400"}),e.jsx("span",{children:"Cryptocurrency Market"})]}),e.jsx(N,{children:"Live crypto trading data powered by TradingView"})]}),e.jsx(x,{children:e.jsx("div",{className:"relative w-full h-[400px] sm:h-[500px] lg:h-[600px] bg-gradient-to-br from-empire-navy-900/20 to-empire-emerald-900/20 rounded-lg overflow-hidden",children:e.jsx("div",{ref:c,className:"w-full h-full",style:{minHeight:"400px"},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"w-8 h-8 sm:w-12 sm:h-12 text-empire-emerald-400 mx-auto mb-4 animate-pulse"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-empire-emerald-400 mb-2",children:"Loading TradingView Chart..."}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground max-w-md px-4",children:"Real-time cryptocurrency charts powered by TradingView"})]})})})})})]})})}),e.jsx(w,{value:"stocks",className:"space-y-6",children:e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:e.jsxs(h,{className:"border-border/50 bg-card/50 backdrop-blur-sm",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"w-5 h-5 text-empire-navy-400"}),e.jsx("span",{children:"Stock Market Overview"})]}),e.jsx(N,{children:"S&P 500, NASDAQ, and major stock indices"})]}),e.jsx(x,{children:e.jsx("div",{className:"relative w-full h-[400px] sm:h-[500px] lg:h-[600px] bg-gradient-to-br from-empire-navy-900/20 to-empire-gold-900/20 rounded-lg overflow-hidden",children:e.jsx("div",{ref:d,className:"w-full h-full",style:{minHeight:"400px"},children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"w-8 h-8 sm:w-12 sm:h-12 text-empire-gold-400 mx-auto mb-4 animate-pulse"}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-empire-gold-400 mb-2",children:"Loading TradingView Chart..."}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground max-w-md px-4",children:"Real-time stock market charts powered by TradingView"})]})})})})})]})})})]}),e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:_.map((s,n)=>{const t=s.changePercent24h>=0;return e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1*n},whileHover:{y:-2},className:"group",children:e.jsx(h,{className:"border-border/50 bg-card/50 backdrop-blur-sm hover:shadow-lg transition-all duration-300",children:e.jsxs(x,{className:"p-3 sm:p-4",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-bold text-sm sm:text-lg truncate",children:s.symbol}),e.jsxs(U,{variant:t?"default":"secondary",className:t?"bg-empire-emerald-500/20 text-empire-emerald-400 text-xs":"bg-red-500/20 text-red-400 text-xs",children:[t?e.jsx(H,{className:"w-2 h-2 sm:w-3 sm:h-3 mr-1"}):e.jsx(z,{className:"w-2 h-2 sm:w-3 sm:h-3 mr-1"}),Q(s.changePercent24h)]})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.name})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-lg sm:text-xl font-bold",children:C(s.price)}),e.jsxs("div",{className:`text-xs sm:text-sm ${t?"text-empire-emerald-400":"text-red-400"}`,children:[t?"+":"",C(s.change24h)]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Vol:"," ",l==="crypto"?p(s.volume24h||0):p(s.volume||0)]}),s.marketCap&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cap: ",p(s.marketCap)]})]})]})})},s.symbol)})})]})});J.displayName="TradingViewEmbed";export{J as default};
